<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'none'; style-src {{cspSource}} 'unsafe-inline'; script-src {{cspSource}} https://cdn.jsdelivr.net 'unsafe-inline';">
    <title>Commit Roulette Dashboard</title>
    <link href="{{styleUri}}" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <h1>ğŸ° Commit Roulette ğŸ°</h1>

    <div class="stats-container">
        <div class="stat-card">
            <div class="stat-value" id="total-curses">{{totalCurses}}</div>
            <div class="stat-label">Total Curses</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="active-streak">{{activeStreak}}</div>
            <div class="stat-label">Current Streak</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="current-prob">{{currentProbability}}%</div>
            <div class="stat-label">Current Probability</div>
        </div>
    </div>

    <div class="chart-container">
        <canvas id="curseChart"></canvas>
    </div>

    <div class="settings-container">
        <h2 style="color: var(--neon-red); text-shadow: 0 0 5px var(--neon-red);">âš™ï¸ Active Curses</h2>
        <div id="curse-toggles" class="curse-toggles">
            <!-- Populated by JS -->
        </div>

        <div class="slider-container">
            <label for="curseDuration">â±ï¸ Curse Duration (minutes): <span
                    id="durationValue">{{curseDuration}}</span></label>
            <input type="range" id="curseDuration" min="1" max="60" value="{{curseDuration}}">
        </div>
    </div>

    <h2>Recent History</h2>
    <table id="history-table">
        <thead>
            <tr>
                <th>Time</th>
                <th>Curse</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <!-- Populated by JS -->
        </tbody>
    </table>

    <script>
        window.initialData = "{{initialData}}";
    </script>
    <script src="{{scriptUri}}"></script>
</body>

</html>